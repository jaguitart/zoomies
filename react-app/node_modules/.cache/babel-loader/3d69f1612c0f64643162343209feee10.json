{"ast":null,"code":"// constants\nconst SET_ORGANIZATION = 'organizations_session/SET_ORGANIZATION';\nconst REMOVE_ORGANIZATION = 'organizations_session/REMOVE_ORGANIZATION';\n\nconst setOrganization = organization => ({\n  type: SET_ORGANIZATION,\n  payload: organization\n});\n\nconst removeOrganization = () => ({\n  type: REMOVE_ORGANIZATION\n});\n\nconst initialState = {\n  organization: null\n};\nexport const org_authenticate = () => async dispatch => {\n  const response = await fetch('/api/organizations/', {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n  if (response.ok) {\n    const data = await response.json();\n\n    if (data.errors) {\n      return;\n    }\n\n    dispatch(setOrganization(data));\n  }\n};\nexport const org_login = (email, password) => async dispatch => {\n  console.log(email, password);\n  const response = await fetch('/api/auth/login', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n\n  if (response.ok) {\n    const data = await response.json();\n    dispatch(setOrganization(data));\n    return null;\n  } else if (response.status < 500) {\n    const data = await response.json();\n\n    if (data.errors) {\n      return data.errors;\n    }\n  } else {\n    return ['An error occurred. Please try again.'];\n  }\n};\nexport const org_logout = () => async dispatch => {\n  const response = await fetch('/api/organizations/logout', {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n  if (response.ok) {\n    dispatch(removeOrganization());\n  }\n};\nexport const org_signUp = (name, email, password) => async dispatch => {\n  const response = await fetch('/api/organizations/signup', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      name,\n      email,\n      password\n    })\n  });\n\n  if (response.ok) {\n    const data = await response.json();\n    dispatch(setOrganization(data));\n    return null;\n  } else if (response.status < 500) {\n    const data = await response.json();\n\n    if (data.errors) {\n      return data.errors;\n    }\n  } else {\n    return ['An error occurred. Please try again.'];\n  }\n};\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case SET_ORGANIZATION:\n      return {\n        organization: action.payload\n      };\n\n    case REMOVE_ORGANIZATION:\n      return {\n        organization: null\n      };\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/home/jaguitart/appAcademy/mod7/zoomies/react-app/src/store/organizations_session.js"],"names":["SET_ORGANIZATION","REMOVE_ORGANIZATION","setOrganization","organization","type","payload","removeOrganization","initialState","org_authenticate","dispatch","response","fetch","headers","ok","data","json","errors","org_login","email","password","console","log","method","body","JSON","stringify","status","org_logout","org_signUp","name","reducer","state","action"],"mappings":"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","sourcesContent":["// constants\nconst SET_ORGANIZATION = 'organizations_session/SET_ORGANIZATION';\nconst REMOVE_ORGANIZATION = 'organizations_session/REMOVE_ORGANIZATION';\n\nconst setOrganization = (organization) => ({\n  type: SET_ORGANIZATION,\n  payload: organization\n});\n\nconst removeOrganization = () => ({\n  type: REMOVE_ORGANIZATION,\n})\n\nconst initialState = { organization: null };\n\nexport const org_authenticate = () => async (dispatch) => {\n  const response = await fetch('/api/organizations/', {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  if (response.ok) {\n    const data = await response.json();\n    if (data.errors) {\n      return;\n    }\n  \n    dispatch(setOrganization(data));\n  }\n}\n\nexport const org_login = (email, password) => async (dispatch) => {\n  console.log(email, password);\n  const response = await fetch('/api/auth/login', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n  \n  \n  if (response.ok) {\n    const data = await response.json();\n    dispatch(setOrganization(data))\n    return null;\n  } else if (response.status < 500) {\n    const data = await response.json();\n    if (data.errors) {\n      return data.errors;\n    }\n  } else {\n    return ['An error occurred. Please try again.']\n  }\n\n}\n\nexport const org_logout = () => async (dispatch) => {\n  const response = await fetch('/api/organizations/logout', {\n    headers: {\n      'Content-Type': 'application/json',\n    }\n  });\n\n  if (response.ok) {\n    dispatch(removeOrganization());\n  }\n};\n\n\nexport const org_signUp = (name, email, password) => async (dispatch) => {\n  const response = await fetch('/api/organizations/signup', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      name,\n      email,\n      password,\n    }),\n  });\n  \n  if (response.ok) {\n    const data = await response.json();\n    dispatch(setOrganization(data))\n    return null;\n  } else if (response.status < 500) {\n    const data = await response.json();\n    if (data.errors) {\n      return data.errors;\n    }\n  } else {\n    return ['An error occurred. Please try again.']\n  }\n}\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case SET_ORGANIZATION:\n      return { organization: action.payload }\n    case REMOVE_ORGANIZATION:\n      return { organization: null }\n    default:\n      return state;\n  }\n}"]},"metadata":{},"sourceType":"module"}